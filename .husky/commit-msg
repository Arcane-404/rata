#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo '[Husky] COMMIT-MSG';
echo -e 'ðŸ’¬ Checking branch name, commit message \n';

# â€”â€” Check Branch Name â€”â€”
if [[ $(git rev-parse --abbrev-ref HEAD) = main ]]; then
  echo 'âšªâšª BRANCH ABORTED â€” Do not commit on main branch âšªâšª';
  exit 1;
fi;

# â€”â€” Check Commit Message â€”â€”
npm run load:cl -- $1 || (
  echo 'ðŸ”´ðŸ”´ COMMIT ABORTED â€” Your commit message is invalid. ðŸ”´ðŸ”´';
  exit 1;
);

# If everything passes... Now it can publish
echo 'âœ…âœ…âœ… (2) - COMMIT-MSG â€” Pass! Let us finish âœ…âœ…âœ…';
