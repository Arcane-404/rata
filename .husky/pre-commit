#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo '[Husky] PRE-COMMIT';
echo -e 'ğŸ§® Checking quality, format, type \n';

# â€”â€” Check local staged/modified work â€”â€”
npm run load:stage;

# â€”â€” Check Prettier â€”â€”
npm run check:format ||
(
  echo 'ğŸŸ ğŸŸ  FORMAT FAILED - Your code format has an error ğŸŸ ğŸŸ 
    Make the required changes listed above, add changes, and try commit again.
    [options] :: "npm run check:format" or "npm run apply:format"
  ';
  false;
);

# â€”â€” Check ESLint â€”â€”
npm run check:quality ||
(
  echo 'ğŸŸ£ğŸŸ£ LINT FAILED - Your code quality has an error ğŸŸ£ğŸŸ£
    Make the required changes listed above, add changes, and try to commit again.
    [options] :: "npm run check:quality" or "npm run apply:quality"
  ';
  false;
);

# â€”â€” Check Type â€”â€”
npm run check:type ||
(
  echo 'ğŸ”µğŸ”µ TYPE FAILED - Your type definition has an error ğŸ”µğŸ”µ
    Make the required changes listed above, add changes, and try to commit again.
    [options] :: "npm run check:type"
  ';
  false;
);

# â€”â€” Check Build â€”â€”
# npm run build ||
# (
#   echo 'ğŸŸ¤ğŸŸ¤ BUILD FAILED - Your build has an error ğŸŸ¤ğŸŸ¤
#     Build Release Failed... View the errors above to see why.
#   ';
#   false;
# )
# && npm run unbuild

# If everything passes - Now it can publish
echo 'âœ…âœ…âœ… (1) - PRE-COMMIT â€” Pass! Let us continue âœ…âœ…âœ…';
